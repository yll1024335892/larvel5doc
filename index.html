<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="shortcut icon" href="assets/ico/favicon.png">
        <meta name="description" content="Laravel Cheat Sheet , Codes , function , methods of laravel framework">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="@summer">
        <title>Laravel 5.7 LTS 速查表</title>
      	<meta name="description" content="Laravel 5.7 LTS 速查表方便快速浏览，支持并且只支持 Laravel 5.7 LTS，支持手机访问，支持中英文版本">
      	<meta name="keywords" content="Laravel 5.7 LTS 速查表，Laravel 5.7 教程，Laravel 5.7 新手教程，Laravel 5.7 Artisan，Laravel 5.7 Auth，Laravel 5.7 Blade，Laravel 5.7 Cache，Laravel 5.7 Composer，Laravel 5.7 Config，Laravel 5.7 Container，Laravel 5.7 Cookie，Laravel 5.7 DB，Laravel 5.7 Environment，Laravel 5.7 Event，Laravel 5.7 File，Laravel 5.7 Form，Laravel 5.7 HTML，Laravel 5.7 Helper，Laravel 5.7 Input，Laravel 5.7 Lang，Laravel 5.7 Log，Laravel 5.7 Mail，Laravel 5.7 Model，Laravel 5.7 Pagination，Laravel 5.7 Queue，Laravel 5.7 Redirect，Laravel 5.7 Request，Laravel 5.7 Response，Laravel 5.7 Route，Laravel 5.7 SSH，Laravel 5.7 Schema，Laravel 5.7 Security，Laravel 5.7 Session，Laravel 5.7 String，Laravel 5.7 URL，Laravel 5.7 UnitTest，Laravel 5.7 Validation，Laravel 5.7 View">
        <link rel="stylesheet" href="assets/css/normalize.css" />
        <link rel="stylesheet" href="assets/css/foundation.min.css" />
        <link rel="stylesheet" href="assets/css/font-awesome.min.css" />
        <link rel="stylesheet" href="assets/css/page.css" />
    </head>
    <body>

      <div class="off-canvas-wrapper wrapper-container">
        <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

          <div class="off-canvas position-left sidebar-canvas" id="offCanvasLeft" data-off-canvas data-position="left">
            <button class="close-button" aria-label="Close menu" type="button" data-close>
              <span aria-hidden="true">&times;</span>
            </button>
            <ul class="mobile-ofc vertical menu">
              <li>
                <button class="warning hollow button check-all-button">查看全部</button>
              </li>
              <li>
                <ul class="submenu menu vertical mobile-cmd-cell" data-submenu>
                </ul>
              </li>
            </ul>
          </div>

            <div class="off-canvas-content" data-off-canvas-content>
              <div class="title-bar hide-for-medium">
                <div class="title-bar-left">
                  <button class="menu-icon" type="button" data-open="offCanvasLeft"></button>
                </div>
              </div>
            </div>

              <a href="#top" id="top-button" title="Top"><i class="icon-arrow-up"></i></a>
              <a href="#" class="comments-toggle" title="隐藏/展示代码注释"><i class="icon-eye-close"></i></a>

              <div class="row full-width">

                  <div class="large-2 columns code-column sidebar">
                    <h5 class="sidebar-title">Laravel 5.7 LTS 速查表</h5>
                    <hr class="horizonal-line">
                    <div class="show-for-medium">
                      <button class="warning hollow button check-all-button">查看全部</button>

                      <div class="clearfix"></div>
                      <ul class="sidebar-menu">
                      </ul>

                      <div class="clearfix"></div>

                      <hr class="horizonal-line">
                    </div>
                    <ul class="sidebar-bottom">
                      <li><a href="http://www.52website.cn" class="button expand small radius alert">技术支持</a></li>
                      <li class="social-icon">
                        <a href="https://github.com/yll1024335892" target="_blank" data-tooltip aria-haspopup="true" class="top" data-disable-hover="false" tabindex="2" title="此项目由 yll1024335892 倾情维护">
                          <div class="avatar"></div>
                        </a>
                        <a href="https://github.com/yll1024335892/larvel5doc" target="_blank" data-tooltip aria-haspopup="true" class="top" data-disable-hover="false" tabindex="2" title="在 GitHub 查看此项目">
                          <i class="icon-github"></i>
                        </a>
                        <a href="javascript:" target="_blank" data-tooltip aria-haspopup="true" class="top" data-disable-hover="false" tabindex="2" title="关注我的 Twitter">
                          <i class="icon-twitter"></i>
                        </a>
                        <a href="javascript:" target="_blank" data-tooltip aria-haspopup="true" class="top" data-disable-hover="false" tabindex="2" title="关注我的微博">
                          <i class="icon-weibo"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                  <div class="large-10 columns code-column code-container">
                    <div class="grid">
                    <section class="cmd-description grid-item">
                      <h4><a name="artisan" href="#artisan">Artisan</a> <a href="javascript:" title="Artisan CLI @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
                      <pre class="prettyprint lang-php">
// 在版本 5.7.11
php artisan make:policy PostPolicy
// 针对命令显示帮助信息
php artisan --help OR -h
// 抑制输出信息
php artisan --quiet OR -q
// 打印 Laravel 的版本信息
php artisan --version OR -V
// 不询问任何交互性的问题
php artisan --no-interaction OR -n
// 强制输出 ANSI 格式
php artisan --ansi
// 禁止输出 ANSI 格式
php artisan --no-ansi
// 显示当前命令行运行的环境
php artisan --env
// -v|vv|vvv 通过增加 v 的个数来控制命令行输出内容的详尽情况: 1 个代表正常输出, 2 个代表输出更多消息, 3 个代表调试
php artisan --verbose
// 移除编译优化过的文件 (storage/frameworks/compiled.php)
php artisan clear-compiled
// 显示当前框架运行的环境
php artisan env
// 显示某个命令的帮助信息
php artisan help
// 显示所有可用的命令
php artisan list
// 进入应用交互模式
php artisan tinker
// 进入维护模式
php artisan down
// 退出维护模式
php artisan up
// 优化框架性能
// --force    强制编译已写入文件 (storage/frameworks/compiled.php)
// --psr      不对 Composer 的 dump-autoload 进行优化
php artisan optimize [--force] [--psr]
// 启动内置服务器
php artisan serve
// 更改默认端口
php artisan serve --port 8080
// 使其在本地服务器外也可正常工作
php artisan serve --host 0.0.0.0
// 更改应用命名空间
php artisan app:name namespace
// 清除过期的密码重置令牌
php artisan auth:clear-resets
// 清空应用缓存
php artisan cache:clear
// 创建缓存数据库表 migration
php artisan cache:table
// 合并所有的配置信息为一个，提高加载速度
php artisan config:cache
// 移除配置缓存文件
php artisan config:clear
// 程序内部调用 Artisan 命令
$exitCode = Artisan::call('config:cache');
// 运行所有的 seed 假数据生成类
// --class      可以指定运行的类，默认是: "DatabaseSeeder"
// --database   可以指定数据库
// --force      当处于生产环境时强制执行操作
php artisan db:seed [--class[="..."]] [--database[="..."]] [--force]

// 基于注册的信息，生成遗漏的 events 和 handlers
php artisan event:generate

// 生成新的处理器类
// --command      需要处理器处理的命令类名字
php artisan handler:command [--command="..."] name
// 创建一个新的时间处理器类
// --event        需要处理器处理的事件类名字
// --queued       需要处理器使用队列话处理的事件类名字
php artisan handler:event [--event="..."] [--queued] name

// 生成应用的 key（会覆盖）
php artisan key:generate

// 在默认情况下, 这将创建未加入队列的自处理命令
// 通过 --handler 标识来生成一个处理器, 用 --queued 来使其入队列.
php artisan make:command [--handler] [--queued] name
// 创建一个新的 Artisan 命令
//  --command     命令被调用的名称。 (默认为: "command:name")
php artisan make:console [--command[="..."]] name
// 创建一个新的资源控制器
// --plain      生成一个空白的控制器类
php artisan make:controller [--plain] name
php artisan make:controller App\\Admin\\Http\\Controllers\\DashboardController
// 创建一个新的事件类
php artisan make:event name
// 创建一个新的中间件类
php artisan make:middleware name
// 创建一个新的迁移文件
// --create     将被创建的数据表.
// --table      将被迁移的数据表.
php artisan make:migration [--create[="..."]] [--table[="..."]] name
// 创建一个新的 Eloquent 模型类
php artisan make:model name
// 创建一个新的服务提供者类
php artisan make:provider name
// 创建一个新的表单请求类
php artisan make:request name
// 数据库迁移
// --database   指定数据库连接（下同）
// --force      当处于生产环境时强制执行，不询问（下同）
// --path       指定单独迁移文件地址
// --pretend    把将要运行的 SQL 语句打印出来（下同）
// --seed       Seed 任务是否需要被重新运行（下同）
php artisan migrate [--database[="..."]] [--force] [--path[="..."]] [--pretend] [--seed]
// 创建迁移数据库表
php artisan migrate:install [--database[="..."]]
// 重置并重新运行所有的 migrations
// --seeder     指定主 Seeder 的类名
php artisan migrate:refresh [--database[="..."]] [--force] [--seed] [--seeder[="..."]]
// 回滚所有的数据库迁移
php artisan migrate:reset [--database[="..."]] [--force] [--pretend]
// 回滚最最近一次运行的迁移任务
php artisan migrate:rollback [--database[="..."]] [--force] [--pretend]
// migrations 数据库表信息
php artisan migrate:status
// 为队列数据库表创建一个新的迁移
php artisan queue:table
// 监听指定的队列
// --queue      被监听的队列
// --delay      给执行失败的任务设置延时时间 (默认为零: 0)
// --memory     内存限制大小，单位为 MB (默认为: 128)
// --timeout    指定任务运行超时秒数 (默认为: 60)
// --sleep      等待检查队列任务的秒数 (默认为: 3)
// --tries      任务记录失败重试次数 (默认为: 0)
php artisan queue:listen [--queue[="..."]] [--delay[="..."]] [--memory[="..."]] [--timeout[="..."]] [--sleep[="..."]] [--tries[="..."]] [connection]
// 查看所有执行失败的队列任务
php artisan queue:failed
// 为执行失败的数据表任务创建一个迁移
php artisan queue:failed-table
// 清除所有执行失败的队列任务
php artisan queue:flush
// 删除一个执行失败的队列任务
php artisan queue:forget
// 在当前的队列任务执行完毕后, 重启队列的守护进程
php artisan queue:restart
// 对指定 id 的执行失败的队列任务进行重试(id: 失败队列任务的 ID)
php artisan queue:retry id
// 指定订阅 Iron.io 队列的链接
// queue: Iron.io 的队列名称.
// url: 将被订阅的 URL.
// --type       指定队列的推送类型.
php artisan queue:subscribe [--type[="..."]] queue url
// 处理下一个队列任务
// --queue      被监听的队列
// --daemon     在后台模式运行
// --delay      给执行失败的任务设置延时时间 (默认为零: 0)
// --force      强制在「维护模式下」运行
// --memory     内存限制大小，单位为 MB (默认为: 128)
// --sleep      当没有任务处于有效状态时, 设置其进入休眠的秒数 (默认为: 3)
// --tries      任务记录失败重试次数 (默认为: 0)
php artisan queue:work [--queue[="..."]] [--daemon] [--delay[="..."]] [--force] [--memory[="..."]] [--sleep[="..."]] [--tries[="..."]] [connection]

// 生成路由缓存文件来提升路由效率
php artisan route:cache
// 移除路由缓存文件
php artisan route:clear
// 显示已注册过的路由
php artisan route:list

// 运行计划命令
php artisan schedule:run

// 为 session 数据表生成迁移文件
php artisan session:table

// 从 vendor 的扩展包中发布任何可发布的资源
// --force        重写所有已存在的文件
// --provider     指定你想要发布资源文件的服务提供者
// --tag          指定你想要发布标记资源.
php artisan vendor:publish [--force] [--provider[="..."]] [--tag[="..."]]
php artisan tail [--path[="..."]] [--lines[="..."]] [connection]
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="composer" href="#composer">Composer</a> <a href="http://getcomposer.org/doc/03-cli.md" title="Composer CLI Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
composer create-project laravel/laravel folder_name
composer install
composer update
composer dump-autoload [--optimize]
composer self-update
composer require [options] [--] [vendor/packages]...
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="Configuration" href="#Configuration">Config</a> <a href="javascript:" title="Configuration Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Config::get('app.timezone');
//指定默认值
Config::get('app.timezone', 'UTC');
Config::set('database.default', 'sqlite');
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="routing" href="#routing">Route</a> <a href="javascript:" title="Routing @ Laravel Docs"><i class="icon-file-text"></i></a> <a href="javascript:" title="Routing Helpers @ Laravel Docs"><i class="icon-file-text"></i></a> </h4>
              <pre class="prettyprint lang-php">
Route::get('foo', function(){});
Route::get('foo', 'ControllerName@function');
Route::controller('foo', 'FooController');
              </pre>

              <h6>资源路由 <a href="javascript:" title="RESTful Controllers @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
Route::resource('posts','PostsController');
// 资源路由器只允许指定动作通过
Route::resource('photo', 'PhotoController',['only' => ['index', 'show']]);
Route::resource('photo', 'PhotoController',['except' => ['update', 'destroy']]);
              </pre>

              <h6>触发错误 <a href="javascript:" title="throwing-404-errors @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
App::abort(404);
$handler->missing(...) in ErrorServiceProvider::boot();
throw new NotFoundHttpException;
              </pre>

              <h6>路由参数 <a href="javascript:" title="RESTful Controllers @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
Route::get('foo/{bar}', function($bar){});
Route::get('foo/{bar?}', function($bar = 'bar'){});
              </pre>

              <h6>HTTP 请求方式</h6>
              <pre class="prettyprint lang-php">
Route::any('foo', function(){});
Route::post('foo', function(){});
Route::put('foo', function(){});
Route::patch('foo', function(){});
Route::delete('foo', function(){});
// RESTful 资源控制器
Route::resource('foo', 'FooController');
// 为一个路由注册多种请求方式
Route::match(['get', 'post'], '/', function(){});
              </pre>

              <h6>安全路由 (TBD)</h6>
              <pre class="prettyprint lang-php">
Route::get('foo', array('https', function(){}));
              </pre>

              <h6>路由约束</h6>
              <pre class="prettyprint lang-php">
Route::get('foo/{bar}', function($bar){})
->where('bar', '[0-9]+');
Route::get('foo/{bar}/{baz}', function($bar, $baz){})
->where(array('bar' => '[0-9]+', 'baz' => '[A-Za-z]'))
              </pre>
              <pre class="prettyprint lang-php">
// 设置一个可跨路由使用的模式
Route::pattern('bar', '[0-9]+')
              </pre>

              <h6>HTTP 中间件 <a href="javascript:" title="HTTP Middleware @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
// 为路由指定 Middleware
Route::get('admin/profile', ['middleware' => 'auth', function(){}]);
Route::get('admin/profile', function(){})->middleware('auth');
              </pre>

              <h6>命名路由</h6>
              <pre class="prettyprint lang-php">
Route::currentRouteName();
Route::get('foo/bar', array('as' => 'foobar', function(){}));
Route::get('user/profile', [
'as' => 'profile', 'uses' => 'UserController@showProfile'
]);
Route::get('user/profile', 'UserController@showProfile')->name('profile');
$url = route('profile');
$redirect = redirect()->route('profile');
              </pre>

              <h6>路由前缀</h6>
              <pre class="prettyprint lang-php">
Route::group(['prefix' => 'admin'], function()
{
Route::get('users', function(){
return 'Matches The "/admin/users" URL';
});
});
              </pre>

              <h6>路由命名空间</h6>
              <pre class="prettyprint lang-php">
// 此路由组将会传送 'Foo\Bar' 命名空间
Route::group(array('namespace' => 'Foo\Bar'), function(){})
              </pre>
              <h6>子域名路由</h6>
              <pre class="prettyprint lang-php">
// {sub} 将在闭包中被忽略
Route::group(array('domain' => '{sub}.example.com'), function(){});
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="app" href="#app">Environment</a> <a href="javascript:" title="Environment Configuration @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
$environment = app()->environment();
$environment = App::environment();
$environment = $app->environment();
// 判断当环境是否为 local
if ($app->environment('local')){}
// 判断当环境是否为 local 或 staging...
if ($app->environment('local', 'staging')){}
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="log" href="#log">Log</a> <a href="javascript:" title="Log @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
// 记录器提供了 7 种在 RFC 5424 标准内定义的记录等级:
// debug, info, notice, warning, error, critical, and alert.
Log::info('info');
Log::info('info',array('context'=>'additional info'));
Log::error('error');
Log::warning('warning');
// 获取 monolog 实例
Log::getMonolog();
// 添加监听器
Log::listen(function($level, $message, $context) {});
              </pre>

              <h6>记录 SQL 查询语句 <a href="javascript:" title="Log @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
// 开启 log
DB::connection()->enableQueryLog();
// 获取已执行的查询数组
DB::getQueryLog();
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="urls" href="#urls">URL</a> <a href="javascript:" title="UrlGenerator @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
URL::full();
URL::current();
URL::previous();
URL::to('foo/bar', $parameters, $secure);
URL::action('NewsController@item', ['id'=>123]);
// 需要在适当的命名空间内
URL::action('Auth\AuthController@logout');
URL::action('FooController@method', $parameters, $absolute);
URL::route('foo', $parameters, $absolute);
URL::secure('foo/bar', $parameters);
URL::asset('css/foo.css', $secure);
URL::secureAsset('css/foo.css');
URL::isValidUrl('http://example.com');
URL::getRequest();
URL::setRequest($request);
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="events" href="#events">Event</a> <a href="javascript:" title="Events @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Event::fire('foo.bar', array($bar));
// 注册一个事件监听器.
// void listen(string|array $events, mixed $listener, int $priority)
Event::listen('App\Events\UserSignup', function($bar){});
Event::listen('foo.*', function($bar){});
Event::listen('foo.bar', 'FooHandler', 10);
Event::listen('foo.bar', 'BarHandler', 5);
// 你可以直接在处理逻辑中返回 false 来停止一个事件的传播.
Event::listen('foor.bar', function($event){ return false; });
Event::subscribe('UserEventHandler');
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="db" href="#db">DB</a> <a href="javascript:" title="Basic Database Usage @ Laravel Docs"><i class="icon-file-text"></i></a></h4>

              <h6>基本使用</h6>
              <pre class="prettyprint lang-php">
DB::connection('connection_name');
// 运行数据库查询语句
$results = DB::select('select * from users where id = ?', [1]);
$results = DB::select('select * from users where id = :id', ['id' => 1]);
// 运行普通语句
DB::statement('drop table users');
// 监听查询事件
DB::listen(function($sql, $bindings, $time){ code_here; });
// 数据库事务处理
DB::transaction(function()
{
DB::table('users')->update(['votes' => 1]);
DB::table('posts')->delete();
});
DB::beginTransaction();
DB::rollBack();
DB::commit();
              </pre>

              <h6>查询语句构造器 <a href="javascript:" title="Query Builder @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
// 取得数据表的所有行
DB::table('name')->get();
// 取数据表的部分数据
DB::table('users')->chunk(100, function($users)
{
  foreach ($users as $user)
  {
      //
  }
});
// 取回数据表的第一条数据
$user = DB::table('users')->where('name', 'John')->first();
DB::table('name')->first();
// 从单行中取出单列数据
$name = DB::table('users')->where('name', 'John')->pluck('name');
DB::table('name')->pluck('column');
// 取多行数据的「列数据」数组
$roles = DB::table('roles')->lists('title');
$roles = DB::table('roles')->lists('title', 'name');
// 指定一个选择字句
$users = DB::table('users')->select('name', 'email')->get();
$users = DB::table('users')->distinct()->get();
$users = DB::table('users')->select('name as user_name')->get();
// 添加一个选择字句到一个已存在的查询语句中
$query = DB::table('users')->select('name');
$users = $query->addSelect('age')->get();
// 使用 Where 运算符
$users = DB::table('users')->where('votes', '>', 100)->get();
$users = DB::table('users')
              ->where('votes', '>', 100)
              ->orWhere('name', 'John')
              ->get();
$users = DB::table('users')
      ->whereBetween('votes', [1, 100])->get();
$users = DB::table('users')
      ->whereNotBetween('votes', [1, 100])->get();
$users = DB::table('users')
      ->whereIn('id', [1, 2, 3])->get();
$users = DB::table('users')
      ->whereNotIn('id', [1, 2, 3])->get();
$users = DB::table('users')
      ->whereNull('updated_at')->get();
DB::table('name')->whereNotNull('column')->get();
// 动态的 Where 字句
$admin = DB::table('users')->whereId(1)->first();
$john = DB::table('users')
      ->whereIdAndEmail(2, 'john@doe.com')
      ->first();
$jane = DB::table('users')
      ->whereNameOrAge('Jane', 22)
      ->first();
// Order By, Group By, 和 Having
$users = DB::table('users')
      ->orderBy('name', 'desc')
      ->groupBy('count')
      ->having('count', '>', 100)
      ->get();
DB::table('name')->orderBy('column')->get();
DB::table('name')->orderBy('column','desc')->get();
DB::table('name')->having('count', '>', 100)->get();
// 偏移 & 限制
$users = DB::table('users')->skip(10)->take(5)->get();
          </pre>

          <h6>Joins <a href="javascript:" title="Joins @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
          <pre class="prettyprint lang-php">
// 基本的 Join 声明语句
DB::table('users')
    ->join('contacts', 'users.id', '=', 'contacts.user_id')
    ->join('orders', 'users.id', '=', 'orders.user_id')
    ->select('users.id', 'contacts.phone', 'orders.price')
    ->get();
// Left Join 声明语句
DB::table('users')
->leftJoin('posts', 'users.id', '=', 'posts.user_id')
->get();
// select * from users where name = 'John' or (votes > 100 and title <> 'Admin')
DB::table('users')
    ->where('name', '=', 'John')
    ->orWhere(function($query)
    {
        $query->where('votes', '>', 100)
              ->where('title', '<>', 'Admin');
    })
    ->get();
          </pre>

          <h6>聚合 <a href="javascript:" title="Aggregates @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
          <pre class="prettyprint lang-php">
$users = DB::table('users')->count();
$price = DB::table('orders')->max('price');
$price = DB::table('orders')->min('price');
$price = DB::table('orders')->avg('price');
$total = DB::table('users')->sum('votes');
          </pre>

          <h6>原始表达句<a href="javascript:" title="Raw Expressions @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
          <pre class="prettyprint lang-php">
$users = DB::table('users')
                   ->select(DB::raw('count(*) as user_count, status'))
                   ->where('status', '<>', 1)
                   ->groupBy('status')
                   ->get();
// 返回行
DB::select('select * from users where id = ?', array('value'));
DB::insert('insert into foo set bar=2');
DB::update('update foo set bar=2');
DB::delete('delete from bar');
// 返回 void
DB::statement('update foo set bar=2');
// 在声明语句中加入原始的表达式
DB::table('name')->select(DB::raw('count(*) as count, column2'))->get();
          </pre>

          <h6>Inserts / Updates / Deletes / Unions / Pessimistic Locking</h6>
          <pre class="prettyprint lang-php">
// 插入
DB::table('users')->insert(
  ['email' => 'john@example.com', 'votes' => 0]
);
$id = DB::table('users')->insertGetId(
  ['email' => 'john@example.com', 'votes' => 0]
);
DB::table('users')->insert([
  ['email' => 'taylor@example.com', 'votes' => 0],
  ['email' => 'dayle@example.com', 'votes' => 0]
]);
// 更新
DB::table('users')
          ->where('id', 1)
          ->update(['votes' => 1]);
DB::table('users')->increment('votes');
DB::table('users')->increment('votes', 5);
DB::table('users')->decrement('votes');
DB::table('users')->decrement('votes', 5);
DB::table('users')->increment('votes', 1, ['name' => 'John']);
// 删除
DB::table('users')->where('votes', '<', 100)->delete();
DB::table('users')->delete();
DB::table('users')->truncate();
// 集合
// unionAll() 方法也是可供使用的，调用方式与 union 相似
$first = DB::table('users')->whereNull('first_name');
$users = DB::table('users')->whereNull('last_name')->union($first)->get();
// 消极锁
DB::table('users')->where('votes', '>', 100)->sharedLock()->get();
DB::table('users')->where('votes', '>', 100)->lockForUpdate()->get();
              </pre>
      </section>

<section class="cmd-description grid-item">
      <h4><a name="eloquent" href="#eloquent">Model</a> <a href="javascript:" title="Eloquent @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
          <h6>基础使用 <a href="javascript:" title="Basic Usage @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
          <pre class="prettyprint lang-php">
// 定义一个 Eloquent 模型
class User extends Model {}
// 生成一个 Eloquent 模型
php artisan make:model User

// 指定一个自定义的数据表名称
class User extends Model {
//表名自动复数化MyUsers为my_users
  protected $table = 'my_users';
//主键默认为id且是自增的，现在修改如下,$primaryKey默认自增
protected $primaryKey='contact_id';
//不想让其自增
public $incrementing = false;
//希望每张表都有created_at和updated_at时间戳列$timestamps为true,否则为false
public $timestamps = false;
//存储时间格式,$dateFormat的值会按照php的date()语法来解析，下面的是UNIX版本的秒来存储日期
protected $dateFormat='U';
}

          </pre>

          <h6>More</h6>
          <pre class="prettyprint lang-php">
//插入数据
Model::create(array('key' => 'value'));
// 通过属性找到第一条相匹配的数据或创造一条新数据，会把实例持久到数据库并返回
Model::firstOrCreate(array('key' => 'value'));
// 通过属性找到第一条相匹配的数据或实例化一条新数据，会返回但不会保存实例
Model::firstOrNew(array('key' => 'value'));
// 通过属性找到相匹配的数据并更新，如果不存在即创建
Model::updateOrCreate(array('search_key' => 'search_value'), array('key' => 'value'));
// 使用属性的数组来填充一个模型, 用的时候要小心「Mass Assignment」安全问题 !
Model::fill($attributes);
Model::destroy(1);
//获取所有的数据
Model::all();
Model::get();
//获取指定ID的数据
Model::find(1);
//获取查询的第一行数据
 Model::first();
// 使用双主键进行查找
Model::find(array('first', 'last'));
// 查找没有任何匹配时抛出异常
Model::findOrFail(1);
// 使用双主键进行查找, 失败时抛出异常
Model::findOrFail(array('first', 'last'));
Model::where('foo', '=', 'bar')->get();
Model::where('foo', '=', 'bar')->first();
Model::where('foo', '=', 'bar')->exists();
// 动态属性查找
Model::whereFoo('bar')->first();
// 查找失败时抛出异常
Model::where('foo', '=', 'bar')->firstOrFail();
Model::where('foo', '=', 'bar')->count();
Model::where('foo', '=', 'bar')->delete();
// 输出原始的查询语句
Model::where('foo', '=', 'bar')->toSql();
Model::whereRaw('foo = bar and cars = 2', array(20))->get();
Model::on('connection-name')->find(1);
Model::with('relation')->get();
Model::all()->take(10);
Model::all()->skip(10);
// 默认的 Eloquent 排序是上升排序
Model::all()->orderBy('column');
Model::all()->orderBy('column','desc');

//用chunk()进行响应分块
Model::chunk(100,function($contacts){
foreach($contacts as $contact){
//对$contact进行操作
}});
              </pre>

    <h6>插入，更新，删除</h6>
    <pre class="prettyprint lang-php">
//插入一个新数据通过save()
$contact=new Contact();
$contact->name="阿翼";
$contact->save();
//或者
$contact=new Contact([
    'name'=>'阿翼'
]);
$contact->save();
//或者
$contact=Contact::create([
    'name'=>'阿翼'
]);

//更新的原则是得到一个实例，改变属性然后保存
$contact=Contact::find(1);
$contact->name="阿翼互联网科技有限公司"
$contact->save();
//或者向update()传入数组以更新一条或多条Eloquent记录,key表示表中的字段名，value表示字段的值
Contact::where('created_at','<',Carbon::now()->subYear())->update(['logevity'=>'ancient']);
//或
$contact=Contact::find(1);
$contact->update(['logevity'=>'ancient']);

//批量赋值
class Contact{
//可填充(白名单)
    protected $fillable=['name','email'];
//防护(不可以添加数据)
    protected $guarded=['id','created_at','updated_at','owner_id'];
        public function update(Contact $contact,Request $request){
//没有对可插入的字段做限制的化，某些字段会插入我们并不想要的值
        $contact->update($request->all());
//通过$request->only('','',...)来过滤需要的数据
        Contact::create($request->only('name','email'));
    }
}

//普通删除
$contact=Contact::find(5);
$contact->delete();
//或者
Contact::destroy(1);
//或
Contact::destroy([1,5,7]);
//删除查询的所有结果
Contact::where('updated_at','<',Carbon::now()->subYear())->delete();

//软删除
//开启软删除1,在迁移中添加softDeletes，2,在模型中导入SoftDeletes特征,3,将deleted_at添加到$dates属性中
Schema::table('contacts',function(Blueprint $table){
        $table->softDeletes()
});

Class Contact extends Model{
    use SoftDeletes;
    protected $dates=['deleted_at'];
}
//在查询中添加上软删除条目
Model::withTrashed()->where('cars', 2)->get();
//使用trashed()方法来查看指定的实例是否已经被软删除
if($contact->trashed()){
//操作
}
// 在查询结果中包括带被软删除的模型，restore()恢复被软删除的数据
Model::withTrashed()->where('cars', 2)->restore();
//forceDelete()强制删除软删除的数据
Model::where('cars', 2)->forceDelete();
// 查寻只带有软删除的模型
Model::onlyTrashed()->where('cars', 2)->get();
              </pre>

              <h6>模型关联</h6>
              <pre class="prettyprint lang-php">
// 一对一 - User::phone()
  return $this->hasOne('App\Phone', 'foreign_key', 'local_key');
// 一对一 - Phone::user(), 定义相对的关联
return $this->belongsTo('App\User', 'foreign_key', 'other_key');

// 一对多 - Post::comments()
return $this->hasMany('App\Comment', 'foreign_key', 'local_key');
//  一对多 - Comment::post()
return $this->belongsTo('App\Post', 'foreign_key', 'other_key');

// 多对多 - User::roles();
return $this->belongsToMany('App\Role', 'user_roles', 'user_id', 'role_id');
// 多对多 - Role::users();
return $this->belongsToMany('App\User');
// 多对多 - Retrieving Intermediate Table Columns
$role->pivot->created_at;
// 多对多 - 中介表字段
return $this->belongsToMany('App\Role')->withPivot('column1', 'column2');
// 多对多 - 自动维护 created_at 和 updated_at 时间戳
return $this->belongsToMany('App\Role')->withTimestamps();

// 远层一对多 - Country::posts(), 一个 Country 模型可能通过中介的 Users
// 模型关联到多个 Posts 模型(User::country_id)
return $this->hasManyThrough('App\Post', 'App\User', 'country_id', 'user_id');

// 多态关联 - Photo::imageable()
return $this->morphTo();
// 多态关联 - Staff::photos()
return $this->morphMany('App\Photo', 'imageable');
// 多态关联 - Product::photos()
return $this->morphMany('App\Photo', 'imageable');
// 多态关联 - 在 AppServiceProvider 中注册你的「多态对照表」
Relation::morphMap([
    'Post' => App\Post::class,
    'Comment' => App\Comment::class,
]);

// 多态多对多关联 - 涉及数据库表: posts,videos,tags,taggables
// Post::tags()
return $this->morphToMany('App\Tag', 'taggable');
// Video::tags()
return $this->morphToMany('App\Tag', 'taggable');
// Tag::posts()
return $this->morphedByMany('App\Post', 'taggable');
// Tag::videos()
return $this->morphedByMany('App\Video', 'taggable');

// 查找关联
$user->posts()->where('active', 1)->get();
// 获取所有至少有一篇评论的文章...
$posts = App\Post::has('comments')->get();
// 获取所有至少有三篇评论的文章...
$posts = Post::has('comments', '>=', 3)->get();
// 获取所有至少有一篇评论被评分的文章...
$posts = Post::has('comments.votes')->get();
// 获取所有至少有一篇评论相似于 foo% 的文章
$posts = Post::whereHas('comments', function ($query) {
    $query->where('content', 'like', 'foo%');
})->get();

// 预加载
$books = App\Book::with('author')->get();
$books = App\Book::with('author', 'publisher')->get();
$books = App\Book::with('author.contacts')->get();

// 延迟预加载
$books->load('author', 'publisher');

// 写入关联模型
$comment = new App\Comment(['message' => 'A new comment.']);
$post->comments()->save($comment);
// Save 与多对多关联
$post->comments()->saveMany([
    new App\Comment(['message' => 'A new comment.']),
    new App\Comment(['message' => 'Another comment.']),
]);
$post->comments()->create(['message' => 'A new comment.']);

// 更新「从属」关联
$user->account()->associate($account);
$user->save();
$user->account()->dissociate();
$user->save();

// 附加多对多关系
$user->roles()->attach($roleId);
$user->roles()->attach($roleId, ['expires' => $expires]);
// 从用户上移除单一身份...
$user->roles()->detach($roleId);
// 从用户上移除所有身份...
$user->roles()->detach();
$user->roles()->detach([1, 2, 3]);
$user->roles()->attach([1 => ['expires' => $expires], 2, 3]);

// 任何不在给定数组中的 IDs 将会从中介表中被删除。
$user->roles()->sync([1, 2, 3]);
// 你也可以传递中介表上该 IDs 额外的值：
$user->roles()->sync([1 => ['expires' => true], 2, 3]);

              <h6>事件</h6>
              <pre class="prettyprint lang-php">
Model::creating(function($model){});
Model::created(function($model){});
Model::updating(function($model){});
Model::updated(function($model){});
Model::saving(function($model){});
Model::saved(function($model){});
Model::deleting(function($model){});
Model::deleted(function($model){});
Model::observe(new FooObserver);
              </pre>
              <h6>Eloquent 配置信息</h6>
              <pre class="prettyprint lang-php">
// 关闭模型插入或更新操作引发的 「mass assignment」异常
Eloquent::unguard();
// 重新开启「mass assignment」异常抛出功能
Eloquent::reguard();
      </pre>
  </section>

<section class="cmd-description grid-item">
              <h4><a name="pagination" href="#pagination">Pagination</a> <a href="javascript:" title="Pagination @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
// 自动处理分页逻辑
Model::paginate(15);
Model::where('cars', 2)->paginate(15);
// 使用简单模板 - 只有 "上一页" 或 "下一页" 链接
Model::where('cars', 2)->simplePaginate(15);
// 手动分页
Paginator::make($items, $totalItems, $perPage);
// 在页面打印分页导航栏
$variable->links();
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="localization" href="#localization">Lang</a> <a href="javascript:" title="Localization @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
App::setLocale('en');
Lang::get('messages.welcome');
Lang::get('messages.welcome', array('foo' => 'Bar'));
Lang::has('messages.welcome');
Lang::choice('messages.apples', 10);
// Lang::get 的别名
trans('messages.welcome');
              </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="files" href="#files">File</a> <a href="http://laravel.com/api/5.0/Illuminate/Filesystem/Filesystem.html" title="Filesystem @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
File::exists('path');
File::get('path');
File::getRemote('path');
// 获取文件内容
File::getRequire('path');
// 获取文件内容, 仅能引入一次
File::requireOnce('path');
// 将内容写入文件
File::put('path', 'contents');
// 将内容添加在文件原内容后
File::append('path', 'data');
// 通过给定的路径来删除文件
File::delete('path');
// 将文件移动到新目录下
File::move('path', 'target');
// Copy a file to a new location
// 将文件复制到新目录下
File::copy('path', 'target');
// 从文件的路径地址提取文件的扩展
File::extension('path');
// 获取文件类型
File::type('path');
// 获取文件大小
File::size('path');
// 获取文件的最后修改时间
File::lastModified('path');
// 判断给定的路径是否是文件目录
File::isDirectory('directory');
// 判断给定的路径是否是可写入的
File::isWritable('path');
// 判断给定的路径是否是文件
File::isFile('file');
// 查找能被匹配到的路径名
File::glob($patterns, $flag);
// Get an array of all files in a directory.
// 获取一个目录下的所有文件, 以数组类型返回
File::files('directory');
// 获取一个目录下的所有文件 (递归).
File::allFiles('directory');
// 获取一个目录内的目录
File::directories('directory');
// 创建一个目录
File::makeDirectory('path',  $mode = 0777, $recursive = false);
// 将文件夹从一个目录复制到另一个目录下
File::copyDirectory('directory', 'destination', $options = null);
// 递归式删除目录
File::deleteDirectory('directory', $preserve = false);
// 清空指定目录的所有文件和文件夹
File::cleanDirectory('directory');
              </pre>
              </section>

            <section class="cmd-description grid-item">
              <h4><a name="unittest" href="#unittest">UnitTest</a> <a href="javascript:" title="Unit testing @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <h6>Install and run</h6>
              <pre class="prettyprint lang-php">
// 将其加入到 composer.json 并更新:
composer require "phpunit/phpunit:4.0.*"
// 运行测试 (在项目根目录下运行)
./vendor/bin/phpunit
              </pre>
              <h6>Asserts</h6>
              <pre class="prettyprint lang-php">
$this->assertTrue(true);
$this->assertEquals('foo', $bar);
$this->assertCount(1,$times);
$this->assertResponseOk();
$this->assertResponseStatus(403);
$this->assertRedirectedTo('foo');
$this->assertRedirectedToRoute('route.name');
$this->assertRedirectedToAction('Controller@method');
$this->assertViewHas('name');
$this->assertViewHas('age', $value);
$this->assertSessionHasErrors();
// 由单个 key 值来假定 session 有错误...
$this->assertSessionHasErrors('name');
// 由多个 key 值来假定 session 有错误...
$this->assertSessionHasErrors(array('name', 'age'));
$this->assertHasOldInput();
              </pre>
              <h6>Calling routes</h6>
              <pre class="prettyprint lang-php">
$response = $this->call($method, $uri, $parameters, $files, $server, $content);
$response = $this->callSecure('GET', 'foo/bar');
$this->session(['foo' => 'bar']);
$this->flushSession();
$this->seed();
$this->seed($connection);
              </pre>

            </section>

<section class="cmd-description grid-item">
              <h4><a name="SSH" href="#SSH">SSH</a> <a href="javascript:" title="SSH @ Laravel Docs"><i class="icon-file-text"></i></a>
              </h4>
              <h6>Executing Commands</h6>
              <pre class="prettyprint lang-php">
SSH::run(array $commands);
// 指定 remote, 否则将使用默认值
SSH::into($remote)->run(array $commands);
SSH::run(array $commands, function($line)
{
  echo $line.PHP_EOL;
});
              </pre>

              <h6>任务</h6>
              <pre class="prettyprint lang-php">
// 定义任务
SSH::define($taskName, array $commands);
// 执行任务
SSH::task($taskName, function($line)
{
  echo $line.PHP_EOL;
});
              </pre>

              <h6>SFTP 上传</h6>
              <pre class="prettyprint lang-php">
SSH::put($localFile, $remotePath);
SSH::putString($string, $remotePath);
              </pre>
          </section>

          <section class="cmd-description grid-item">
              <h4><a name="schema" href="#chema">Schema</a> <a href="javascript:" title="Schema Builder @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
//创建迁移
php artisan make:migration create_users_table
//迁移中传递标志性内容--create = table_name和--table=_table_name_会将预修改迁移到现有的表中
php artisan make:migration add_votes_to_users_table --table=users
php artisan make:migration create_user_table --create=users
// 创建指定数据表
Schema::create('table', function(Blueprint $table)
{
//创建列
  $table->increments('id');
});
// 指定一个连接
Schema::connection('foo')->create('table', function($table){});
// 通过给定的名称来重命名数据表
Schema::rename($from, $to);
// 删除指定数据表
Schema::drop('table');
// 当数据表存在时, 将指定数据表移除
Schema::dropIfExists('table');
// 判断数据表是否存在
Schema::hasTable('table');
// 判断数据表是否有该列
Schema::hasColumn('table', 'column');
//修改任何数表的列都需要必要的依赖doctrine/dbal包
// 更新一个已存在的数据表列
Schema::table('table', function(Blueprint $table){
//将name的长度255修改为100
    $table->string('name',100)->change();
//设置字段为空
    $table->string('deleted_at')->nullable->change();
});
// 重命名数据表的列
$table->renameColumn('from', 'to');
// 移除指定的数据表列
$table->dropColumn(string|array);
// 指定数据表使用的存储引擎
$table->engine = 'InnoDB';
// 字段顺序，只能在 MySQL 中才能用
$table->string('name')->after('email');
              </pre>

              <h6>索引</h6>
              <pre class="prettyprint lang-php">
$table->string('column')->unique();
//使用了increments()则primary不是必须要有的
$table->primary('column');
// 创建一个双主键
$table->primary(array('first', 'last'));
$table->unique('column');
$table->unique('column', 'key_name');
// 创建一个双唯一性索引
$table->unique(array('first', 'last'));
$table->unique(array('first', 'last'), 'key_name');
$table->index('column');
$table->index('column', 'key_name');
// 创建一个双索引
$table->index(array('first', 'last'));
$table->index(array('first', 'last'), 'key_name');
//删除索引dropPrimary和dropUnique
$table->dropPrimary(array('column'));
$table->dropPrimary('table_column_primary');
$table->dropUnique(array('column'));
$table->dropUnique('table_column_unique');
$table->dropIndex(array('column'));
$table->dropIndex('table_column_index');
              </pre>

              <h6>添加和删除外键</h6>
              <pre class="prettyprint lang-php">
//添加外键：这里为user_id列添加了一个外索引,也就是它引用了Users表中的id这一项
$table->foreign('user_id')->references('id')->on('users');
$table->foreign('user_id')->references('id')->on('users')->onDelete('cascade'|'restrict'|'set null'|'no action');
$table->foreign('user_id')->references('id')->on('users')->onUpdate('cascade'|'restrict'|'set null'|'no action');
//删除一个索引，传入一个引用本地表的字段数组的方式来实现
$table->dropForeign(array('user_id'));
//删除一个索引，通过引用它的索引名（通过连接列名和引用的表名自动生成的方式来实现）
$table->dropForeign('posts_user_id_foreign');
              </pre>

              <h6>字段类型</h6>
              <pre class="prettyprint lang-php">
// 自增
//自增主键会自动创建$table->primary('id')
$table->increments('id');
$table->bigIncrements('id');

// 数字型字段
$table->integer('votes');
$table->tinyInteger('votes');
$table->smallInteger('votes');
$table->mediumInteger('votes');
$table->bigInteger('votes');
$table->float('amount');
//长度15，保留小数点8位
$table->double('column', 15, 8);
//精度为5，数字范围为2
$table->decimal('amount', 5, 2);

// 字符串和文本
$table->char('name', 4);
$table->string('email');
$table->string('name', 100);
$table->text('description');
$table->mediumText('description');
$table->longText('description');

// 日期和时间
$table->date('created_at');
$table->dateTime('created_at');
$table->time('sunrise');
$table->timestamp('added_on');
// Adds created_at and updated_at columns
// 添加 created_at 和 updated_at 行timestamps()nullableTimestamps()效果是一样
$table->timestamps();
$table->nullableTimestamps();

// 其它类型
//BLOB类型
$table->binary('data');
$table->boolean('confirmed');
// 为软删除添加 deleted_at 字段
$table->softDeletes();
//添加一个uuid类型列(mysql中是CHAR(36))
$table->enum('choices', array('foo', 'bar'));
// 为用户remember me的令牌添加一个remember_token类型列VARCHAR(100)
$table->rememberToken();
// 添加整型的 parent_id 和字符串类型的 parent_type用于多条关系
$table->morphs('parent');
->nullable()
->default($value)
->unsigned()
              </pre>

              <h6>建立额外属性</h6>
              <pre class="prettyprint lang-php">
//在mysql中email字段为空，将其放置在last_name字段后
Schema::table('user',function(Blueprint $table){
     $table->string('email')->nullable()->after('last_name');
});
//允许在列中插入NULL值
 nullable()
//在没有设置值时指定列中默认内容
default('default content')
//标记整形列为无符号型
unsigned()
//按顺序把列放置到首列(仅使用mysql)
first()
//按列顺序把列放到另外一列的后面(仅使用mysql)
after('colName')
//添加一个unique索引
unique()
//添加一个主键索引
primary()
//添加一个基本索引
index()
//备注：unique(),primary()和index()方法也可以在Fluent列创建环境以外使用
               </pre>

              <h6>运行迁移</h6>
              <pre class="prettyprint lang-php">
//运行迁移
php artisan migrate
//运行迁移和填充
php artisan migrate --seed
//回滚运行当前安装下的每一个数据库迁移
php artisan migrate:reset
//回滚运行在当前安装下的每一个数据迁移，然后运行每一个可用的迁移。和migrate:reset然后migrate是一样的
php artisan migrate:refresh
//回滚刚刚运行的migrate的迁移或者添加选项--step=1且回滚指定的迁移次数
php artisan migrate:rollback
//显示列出每次迁移的列表，通过Y或者N来显示它是否在当前环境中运行
php artisan migrate:status
                   </pre>
              </section>

<section class="cmd-description grid-item">
              <h4><a name="input" href="#input">Input</a> <a href="javascript:" title="Input @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Input::get('key');
// 指定默认值
Input::get('key', 'default');
Input::has('key');
Input::all();
// 只取回 'foo' 和 'bar'，返回数组
Input::only('foo', 'bar');
// 取除了 'foo' 的所有用户输入数组
Input::except('foo');
Input::flush();
              </pre>

              <h6>会话周期内 Input </h6>
              <pre class="prettyprint lang-php">
// 清除会话周期内的输入
Input::flash();
// 清除会话周期内的指定输入
Input::flashOnly('foo', 'bar');
// 清除会话周期内的除了指定的其他输入
Input::flashExcept('foo', 'baz');
// 取回一个旧的输入条目
Input::old('key','default_value');
              </pre>

              <h6>Files</h6>
              <pre class="prettyprint lang-php">
// 使用一个已上传的文件
Input::file('filename');
// 判断文件是否已上传
Input::hasFile('filename');
// 获取文件属性
Input::file('name')->getRealPath();
Input::file('name')->getClientOriginalName();
Input::file('name')->getClientOriginalExtension();
Input::file('name')->getSize();
Input::file('name')->getMimeType();
// 移动一个已上传的文件
Input::file('name')->move($destinationPath);
// 移动一个已上传的文件，并设置新的名字
Input::file('name')->move($destinationPath, $fileName);
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="cache" href="#cache">Cache</a> <a href="javascript:" title="Cache @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Cache::put('key', 'value', $minutes);
Cache::add('key', 'value', $minutes);
Cache::forever('key', 'value');
Cache::remember('key', $minutes, function(){ return 'value' });
Cache::rememberForever('key', function(){ return 'value' });
Cache::forget('key');
Cache::has('key');
Cache::get('key');
Cache::get('key', 'default');
Cache::get('key', function(){ return 'default'; });
Cache::tags('my-tag')->put('key','value', $minutes);
Cache::tags('my-tag')->has('key');
Cache::tags('my-tag')->get('key');
Cache::tags('my-tag')->forget('key');
Cache::tags('my-tag')->flush();
Cache::increment('key');
Cache::increment('key', $amount);
Cache::decrement('key');
Cache::decrement('key', $amount);
Cache::section('group')->put('key', $value);
Cache::section('group')->get('key');
Cache::section('group')->flush();
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="cookies" href="#cookies">Cookie</a> <a href="javascript:" title="Cookies @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Cookie::get('key');
Cookie::get('key', 'default');
// 创建一个永久有效的 cookie
Cookie::forever('key', 'value');
// 创建一个 N 分钟有效的 cookie
Cookie::make('key', 'value', 'minutes');
// 在回应之前先积累 cookie，回应时统一返回
Cookie::queue('key', 'value', 'minutes');
// 移除 Cookie
Cookie::forget('key');
// 从 response 发送一个 cookie
$response = Response::make('Hello World');
$response->withCookie(Cookie::make('name', 'value', $minutes));
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="sessions" href="#sessions">Session</a> <a href="javascript:" title="Session @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Session::get('key');
// 从会话中读取一个条目
Session::get('key', 'default');
Session::get('key', function(){ return 'default'; });
// 获取 session 的 ID
Session::getId();
// 增加一个会话键值数据
Session::put('key', 'value');
// 将一个值加入到 session 的数组中
Session::push('foo.bar','value');
// 返回 session 的所有条目
Session::all();
// 检查 session 里是否有此条目
Session::has('key');
// 从 session 中移除一个条目
Session::forget('key');
// 从 session 中移除所有条目
Session::flush();
// 生成一个新的 session 标识符
Session::regenerate();
// 把一条数据暂存到 session 中
Session::flash('key', 'value');
// 清空所有的暂存数据
Session::reflash();
// 重新暂存当前暂存数据的子集
Session::keep(array('key1', 'key2'));
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="requests" href="#requests">Request</a> <a href="javascript:" title="Requests @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
//用户的请求状态
// url: http://xx.com/aa/bb
Request::url();
// 访问界面的路径(不包括路径): /aa/bb
Request::path();
// 获取请求 Uri: /aa/bb/?c=d
Request::getRequestUri();
// 返回用户的 IP
Request::ip();
// 获取 Uri: http://xx.com/aa/bb/?c=d
Request::getUri();
// 获取查询字符串: c=d
Request::getQueryString();
// 获取请求端口 (例如 80, 443 等等)
Request::getPort();
// 判断当前请求的 URI 是否可被匹配
Request::is('foo/*');
// 获取 URI 的分段值 (索引从 1 开始)
Request::segment(1);
// 从请求中取回头部信息
Request::header('Content-Type');
// 从请求中取回服务器变量
Request::server('PATH_INFO');
// 判断请求是否是 AJAX 请求
Request::ajax();
// 判断请求是否使用 HTTPS
Request::secure();
// 获取请求方法(GET,POST,PATCH等)
Request::method();
// 判断请求方法是否是指定类型的
Request::isMethod('post');
// 获取原始的 POST 数据
Request::instance()->getContent();
// 获取请求要求返回的格式
Request::format();
// 判断 HTTP Content-Type 头部信息是否包含 */json
Request::isJson();
// 判断 HTTP Accept 头部信息是否为 application/json
Request::wantsJson();
              </pre>

    <h4>基本用户输入</h4>
    <pre class="prettyprint lang-php">
//基本用户输入指通过GET，POST,JOSN得到的输入
//返回所有用户输入内容的数组
$request->all();
//返回单个用户提供的输入字段的值
$request->input(fieldName);
//返回所有用户指定字段名的数组
$request->only(fieldName | [array,of,filed,names]);
//返回所有用户除了指定（字段名）的数组
$request->except(fieldName | [array,of,filed,names]);
//返回表示字段是否存在的布尔值
$request->exists(fieldName);
//返回表示该字段是否存在于输入中并且不为空（具有值）的布尔值
$request->has(fieldName);
//如果页面手动JOSN的输入，则返回ParameterBag,通过  $bag->get('name')获取
$request->json();
//根据键值返回页面接收的JSON数据的值
$request->json(keyName);
//ParameterBag,这个类就像一个关联数组，可以使用get()方法得到一个指定的键值
echo $bag->get('name');
//可以可以用has()方法判断键值是否存在，all()用来获取所有的键和值，count()用来获得条目数，key()用来获得只包含键的数组
    </pre>
    <h4>持久性</h4>
    <pre class="prettyprint lang-php">
//与会话交互的功能，大多数会话功能都存在别的地方，但是有一些特殊方法是与当前界面请求相关的
//将当前请求的用户的输入暂存到稍后获取的会话中
flash()
//为提供数组的任何键值暂存当前请求用户的输入
flashOnly()
//为除提供数组外的任何键值暂存当前请求的用户输入
flashExcept()
//返回所有之前暂存的用户输入的数组，如果传入了一个键值，则返回暂存数据里对应该键值的值
old()
//删除所有之前暂存的用户输入
flush()
//从请求中获取所有的cookie,如果指定了键值，则只获取对应的cookie
cookie()
//返回表示请求在给定键值时是否包含cookie的布尔值
hasCookie()
//备注：flash*()和old()方法是用来存储用户输入和稍后获取用户输入，其通常位于通过验证和拒绝输入后
    </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="responses" href="#responses">Response</a> <a href="javascript:" title="Responses @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
//简单的HTTP响应
Route::get('route',function(){
    return new Illuminate\Http\Response('Hello!');
});
Route::get('route',function(){
    return response('Hello !');
})
//自定义状态和表头的简单HTTP响应
Route::get('route',function(){
    return response('Error!',400)->header('X-Header-Name','header-value')->cookie('cookie-name','cookie-value');
});
//添加cookie
return response($content)->cookie('signup_dismissed',true);
//视图响应
Route::get('/',function(XmlGetterService $xml){
    $data=$xml->get();
    return response()->view('xml-structure',$data)->header('Content-Type','text/xml');
});
//文件下载响应第一个参数文件路径，第二个参数重命名，第三个参数是header信息
return response()->download('file.csv','export.csv',['header'=>'value']);
//文件响应
return response()->file('./invoices/xx.pdf',['header'=>'value']);
//JSON响应，将传入的数组转换为JSON(通过json_encode()),并将Content-Type设置为application/json.同时海可以使用setCallback()方法来创建一个JSONP响应，而不是JSON响应
return response()->json(Contact::all());
return response()->json(Contact::all())->setCallback($request->input('callback'));
return response()->json(['Tom','Jerry']);

//自定义响应宏，一般是创建自定义的服务商，这里暂时放到AppServiceProvide中
class AppServiceProvider{
    ...
    public function boot(){
        Response::macro('myJson',function($content){
            return response(json_encode($content))->headers(['ContentType'=>'application/json']);
        });
    }
}
//使用
return response()->myJson(['name'=>'阿翼']);



//以下内容作为参考
//设置响应的内容
return Response::make($contents);
//设置响应的HTTP状态
return Response::make($contents, 200);
return Response::json(array('key' => 'value'));
return Response::json(array('key' => 'value'))
->setCallback(Input::get('callback'));
//下载响应
return Response::download($filepath);
return Response::download($filepath, $filename, $headers);
// 创建一个回应且修改其头部信息的值
$response = Response::make($contents, 200);
//自定义表头
$response->header('Content-Type', 'application/json');
return $response;
// 为回应附加上 cookie
return Response::make($content)
->withCookie(Cookie::make('key', 'value'));
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="redirects" href="#redirects">Redirect</a> <a href="javascript:" title="Redirects @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
return Redirect::to('foo/bar');
//将暂存数据重定向到会话中with
return Redirect::to('foo/bar')->with('key', 'value');
//使用with暂存的会话
return redirect('dashboard')->with('message','Contact created');
Route::get('dashboard',function(){
    echo session('message');
});
return Redirect::to('foo/bar')->withInput(Input::get());
return Redirect::to('foo/bar')->withInput(Input::except('password'));
return Redirect::to('foo/bar')->withErrors($validator);
// 重定向到之前的请求
return Redirect::back();
// 重定向到命名路由（根据命名路由算出 URL）
return Redirect::route('foobar');
return Redirect::route('foobar', array('value'));
return Redirect::route('foobar', array('key' => 'value'));
// 重定向到控制器动作（根据控制器动作算出 URL）
return Redirect::action('FooController@index');
return Redirect::action('FooController@baz', array('value'));
return Redirect::action('FooController@baz', array('key' => 'value'));
// 跳转到目的地址，如果没有设置则使用默认值 foo/bar
return Redirect::intended('foo/bar');
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="service-container" href="#service-container">Container</a> <a href="javascript:" title="Service Container @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
App::bind('foo', function($app){ return new Foo; });
App::make('foo');
// 如果存在此类, 则返回
App::make('FooBar');
// 单例模式实例到服务容器中
App::singleton('foo', function(){ return new Foo; });
// 将已实例化的对象注册到服务容器中
App::instance('foo', new Foo);
// 注册绑定规则到服务容器中
App::bind('FooRepositoryInterface', 'BarRepository');
// 给应用注册一个服务提供者
App::register('FooServiceProvider');
// 监听容器对某个对象的解析
App::resolving(function($object){});
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="security" href="#security">Security</a></h4>
              <h6>哈希 <a href="javascript:" title="Hashing @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
Hash::make('secretpassword');
Hash::check('secretpassword', $hashedPassword);
Hash::needsRehash($hashedPassword);
              </pre>

              <h6>加密解密</h6>
              <pre class="prettyprint lang-php">
Crypt::encrypt('secretstring');
Crypt::decrypt($encryptedString);
Crypt::setMode('ctr');
Crypt::setCipher($cipher);
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="auth" href="#auth">Auth</a></h4>

              <h6>用户认证 <a href="javascript:" title="Authentication @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
// 判断当前用户是否已认证（是否已登录）
Auth::check();
// 获取当前的认证用户
Auth::user();
// 获取当前的认证用户的 ID（未登录情况下会报错）
Auth::id();
// 通过给定的信息来尝试对用户进行认证（成功后会自动启动会话）
Auth::attempt(['email' => $email, 'password' => $password]);
// 通过 Auth::attempt() 传入 true 值来开启 '记住我' 功能
Auth::attempt($credentials, true);
// 只针对一次的请求来认证用户
Auth::once($credentials);
// 登录一个指定用户到应用上
Auth::login(User::find(1));
// 登录指定用户 ID 的用户到应用上
Auth::loginUsingId(1);
// 使用户退出登录（清除会话）
Auth::logout();
// 验证用户凭证
Auth::validate($credentials);
// Attempt to authenticate using HTTP Basic Auth
// 使用 HTTP 的基本认证方式来认证
Auth::basic('username');
// Perform a stateless HTTP Basic login attempt
// 执行「HTTP Basic」登录尝试
Auth::onceBasic();
// 发送密码重置提示给用户
Password::remind($credentials, function($message, $user){});
              </pre>

              <h6>用户授权 <a href="javascript:" title="Authorization @ Laravel Docs"><i class="icon-file-text"></i></a></h6>
              <pre class="prettyprint lang-php">
// 定义权限
Gate::define('update-post', 'Class@method');
Gate::define('update-post', function ($user, $post) {...});
// 传递多个参数
Gate::define('delete-comment', function ($user, $post, $comment) {});

// 检查权限
Gate::denies('update-post', $post);
Gate::allows('update-post', $post);
Gate::check('update-post', $post);
// 指定用户进行检查
Gate::forUser($user)->allows('update-post', $post);
// 在 User 模型下，使用 Authorizable trait
User::find(1)->can('update-post', $post);
User::find(1)->cannot('update-post', $post);

// 拦截所有检查
Gate::before(function ($user, $ability) {});
Gate::after(function ($user, $ability) {});

// Blade 模板语法
@can('update-post', $post)
@endcan
// 支持 else 表达式
@can('update-post', $post)
@else
@endcan

// 生成一个新的策略
php artisan make:policy PostPolicy
// `policy` 帮助函数
policy($post)->update($user, $post)

// 控制器授权
$this->authorize('update', $post);
// 指定用户 $user 授权
$this->authorizeForUser($user, 'update', $post);

              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="mail" href="#mail">Mail</a> <a href="javascript:" title="Mail @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Mail::send('email.view', $data, function($message){});
Mail::send(array('html.view', 'text.view'), $data, $callback);
Mail::queue('email.view', $data, function($message){});
Mail::queueOn('queue-name', 'email.view', $data, $callback);
Mail::later(5, 'email.view', $data, function($message){});
// 零时将发送邮件请求写入 log，方便测试
Mail::pretend();
              </pre>

              <h6>消息</h6>
              <pre class="prettyprint lang-php">
// 这些都能在 $message 实例中使用, 并可传入到 Mail::send() 或 Mail::queue()
$message->from('email@example.com', 'Mr. Example');
$message->sender('email@example.com', 'Mr. Example');
$message->returnPath('email@example.com');
$message->to('email@example.com', 'Mr. Example');
$message->cc('email@example.com', 'Mr. Example');
$message->bcc('email@example.com', 'Mr. Example');
$message->replyTo('email@example.com', 'Mr. Example');
$message->subject('Welcome to the Jungle');
$message->priority(2);
$message->attach('foo\bar.txt', $options);
// 使用内存数据作为附件
$message->attachData('bar', 'Data Name', $options);
// 附带文件，并返回 CID
$message->embed('foo\bar.txt');
$message->embedData('foo', 'Data Name', $options);
// 获取底层的 Swift Message 对象
$message->getSwiftMessage();
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="queues" href="#queues">Queue</a> <a href="javascript:" title="Queues @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
<h6>创建任务</h6>
php artisan make:job CrunchReports
//生成的任务模型类
class CrunchReports implements ShouldQueue{
//引入如下特性，并实现ShouldQueue的接口，Queueable允许我们指定Laravel如果将任务推送到队列中，InteractsWithQueue允许每个任务在处理工程中控制其与队列的关系，包括删除队列或重新队列；
//SerializesModels为任务提供序列化和反序列化Eloquent模型的能力 
	use InteractsWithQueue,Queueable,SerializesModels;
//构造函数将数据附加到任务中
	public function __construct(){
	
	}
//任务逻辑归属的地方(也是用来引入依赖项的方法签名)
	public function handle(){

	}
}


<h6>任务实例</h6>
use App\ReportGenerator;
use Illuminate/Log\Writer as Logger;
class CrunchReports implements ShouldQueue{
	use InteractsWithQueue,SerializesModels;
	protected $user;
	public function __construct($user){
		$this->user=$user;
	}
	public function handle(ReportGenerator $generator,Looger $looger){
		$generator->generateReportsForUser($this->user);
		$looger->info('Generated reports.');
	}
}
<h6>任务推送到队列中</h6>
//将任务推送至队列，全局dispatch()助手和DispatchesJobs中trait提供的方法，它在每个控制器中是默认导入的
//使用添加到队列中
public function index(){
	$user->auth()->user();
	$this->dispatch(new \App\Jobs\CrunchReports($user));
}
dispatch(new \App\Jobs\CrunchReports($user));
//自定义连接
dispatch((new DoThingJob)->onConnection('redis'));
//自定义队列(根据它们的重要性对队列进行区分,并将其命名为low或high),使用onQueue()处理
dispatch((new DoThingJob)->onQueue('high'));
//自定义延迟-使用delay()方法自定义等待时间
//向队列工作者释放工作前，延迟1分钟
dispatch((new DoThingJob)->delay(60));


<h6>常用的方式整合</h6>
Queue::push('SendMail', array('message' => $message));
Queue::push('SendEmail@send', array('message' => $message));
Queue::push(function($job) use $id {});
// 在多个 workers 中使用相同的负载
Queue::bulk(array('SendEmail', 'NotifyUser'), $payload);
// 开启队列监听器
php artisan queue:listen
php artisan queue:listen connection
php artisan queue:listen --timeout=60
// 只处理第一个队列任务
php artisan queue:work
// 在后台模式启动一个队列 worker
php artisan queue:work --daemon
// 为失败的任务创建 migration 文件
php artisan queue:failed-table
// 监听失败任务
php artisan queue:failed
// 通过 id 删除失败的任务
php artisan queue:forget 5
// 删除所有失败任务
php artisan queue:flush
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="validation" href="#validation">Validation</a> <a href="javascript:" title="Validation @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
Validator::make(
array('key' => 'Foo'),
array('key' => 'required|in:Foo')
);
Validator::extend('foo', function($attribute, $value, $params){});
Validator::extend('foo', 'FooValidator@validate');
Validator::resolver(function($translator, $data, $rules, $msgs)
{
return new FooValidator($translator, $data, $rules, $msgs);
});
              </pre>

              <h6>Rules</h6>
              <pre class="prettyprint lang-php">
//验证字段必须为yes，on，1或true。 这有助于验证“服务条款”的接受程度。
Accepted
//DNS的A(ip: An IPv4 addresses in dotted decimal notation.)类型或者AAAA(ipv6: IPv6 address)类型
Active_URL
//将日期传到strtotime中
After (Date)   如:after:tomorrow
After_Or_Equal (Date)
//必须全是字母
Alpha
//可能包含数字，字母或者下划线
Alpha_Dash
//必须完全是数字和字符
Alpha_Numeric
//验证字段必须是php的Array
Array
//第一次失败停止运行验证规则
Bail
Before (Date)
Before_Or_Equal (Date)
//规则:between:min,max
Between
//必须是false,true,1,0,'0','1'
Boolean
//验证字段必须具有foo_confirmation,如验证密码password和password_confirmation
Confirmed
//根据strtotime验证的是有效日期
Date
//验证字段必须等于给定的日期
Date_Equals:date
//验证字段与给定格式匹配
Date_Format:date或者 Date_Format:format
//具有和字段不同的值
Different:field
//确切的数字长度
Digits:value
//给定的数字长度在min和max之间
digits_between:min,max
//指定规范的约束图片的尺寸可用值min_width, max_width, min_height, max_height, width, height, ratio
dimensions (Image Files)，举例:dimensions:min_width=100,min_height=200或dimensions:ratio=3/2
//使用数组时，里面不包含任何重复的数据
distinct
//验证格式化的邮件形式
email
//验证字段必须存在于给定的数据库表中,未指明column就用第一个名称table名称来表示
exists:table,column举例:exists:states或者exists:states,abbreviation或用于特定数据库中exists:connection.staff,email用点语法表示
//验证字段必须是成功上传的文件
file
//验证字段存在时不为空
filled
Greater Than
Greater Than Or Equal
//验证图片必须是jpeg,png,bmp,gif或者svg
image
//验证值必须是给定值的列表中
in举例:in:one,true,three,...
//验证字段必须存在于另一个字段的值中
in_array规范:in_array:anotherfield.*
//验证字段必须是整数
integer
//验证字段必须是ip地址
ip
ipv4
ipv6
//验证数据必须是有效的json字符串
json
//验证字段必须小于给定字段，这两个字段必须属于同一类型，字符串，数字，数组和文件
lt:field
//验证字段必须小于或等于给定字段（同一类型）
lte:field
//验证字段必须小于或等于最大值
max:value
//验证中的文件必须与给定的MIME类型之一匹配
mimetypes:text/plain,... 举例:mimetypes:video/avi,video/mpeg,video/quicktime
//验证中的文件必须具有列出的扩展名之一相对应的MIME类型
mimes:foo,bar,... 举例:mimes:jpeg,bmp,png
min:value
not_in:foo,bar,...
//验证与正则表单式不匹配
not_regex:pattern 举例:not_regex:/^.+$/i
//验证字段可能为空
nullable
//验证字段必须是数字
numeric
//验证字段必须存在于输入数据中，但可以为空
present
//验证匹配正则
regex:pattern举例验证email的表示regex:/^.+@.+$/i
//验证字段必须存在于输入数据中而不是空的,以下是为空的情况1，值为null;2,值为空字符串;3,值为空数组或空Countable对象;4,该值没有路径上传文件
required
//如果antherfield字段等于任何值，则验证字段必须存在且不为空
required_if:anotherfield,value,...
//除非antherfield字段等于任何值，否则验证字段必须存在且不为空
required_unless:anotherfield,value,...
//验证字段必须存在且仅在存在任何其它指定字段时才为空
required_with:foo,bar,...
//验证字段必须存在，并且仅当存在所有其他指定字段时才为空。
required_with_all:foo,bar,...
//验证字段必须存在，并且仅当不存在任何其他指定字段时才为空。
required_without:foo,bar,...
//验证字段必须存在，并且仅当不存在所有其他指定字段时才为空。
required_without_all:foo,bar,...
//给定字段必须与验证字段匹配。
same:field
size:value
//以给定值其中之一开头
starts_with:foo,bar,...
//必须是字符串且不为空
string
//验证字段必须是有效的时区标识符
timezone
//验证字段在给定的数据库表中是唯一的，如果未指定列选项，则使用字段名称
unique:table,column,except,idColumn举例:unique:users,email_address和连接其它库unique:connection.users,email_address
//字段必须是有效的url
url
//The field under validation must be a valid RFC 4122 (version 1, 3, 4, or 5) universally unique identifier (UUID).
UUID

//原有的
accepted
active_url
after:YYYY-MM-DD
before:YYYY-MM-DD
alpha
alpha_dash
alpha_num
array
between:1,10
confirmed
date
date_format:YYYY-MM-DD
different:fieldname
digits:value
digits_between:min,max
boolean
email
exists:table,column
image
in:foo,bar,...
not_in:foo,bar,...
integer
numeric
ip
max:value
min:value
mimes:jpeg,png
regex:[0-9]
required
required_if:field,value
required_with:foo,bar,...
required_with_all:foo,bar,...
required_without:foo,bar,...
required_without_all:foo,bar,...
same:field
size:value
timezone
unique:table,column,except,idColumn
url

              </pre>

</section>
<section class="cmd-description grid-item">
              <h4><a name="views" href="#views">View</a> <a href="javascript:" title="Views @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
View::make('path/to/view');
View::make('foo/bar')->with('key', 'value');
View::make('foo/bar')->withKey('value');
View::make('foo/bar', array('key' => 'value'));
View::exists('foo/bar');
// 跨视图共享变量
View::share('key', 'value');
// 视图嵌套
View::make('foo/bar')->nest('name', 'foo/baz', $data);
// 注册一个视图构造器
View::composer('viewname', function($view){});
// 注册多个视图到一个视图构造器中
View::composer(array('view1', 'view2'), function($view){});
// 注册一个视图构造器类
View::composer('viewname', 'FooComposer');
View::creator('viewname', function($view){});
              </pre>

              </section>

<section class="cmd-description grid-item">
<h4><a name="blade" href="#blade">Blade</a> <a href="javascript:" title="Blade Templating @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
// 区块占位
@yield('name')
// 扩展布局模板
@extends('layout.name')
// 实现命名为 name 的区块（yield 占位的地方）
@section('name')
@stop
// 可继承内容区块
@section('sidebar')
@show
// 继承父模板内容（@show 的区块内容）
@parent
// 包含子视图
@include('view.name')
// 包含子视图，并传参
@include('view.name', array('key' => 'value'));
// 加载本地化语句
@lang('messages.name')
@choice('messages.name', 1);

@if
@else
@elseif
@endif

@unless
@endunless

@for
@endfor

@foreach
@endforeach

@while
@endwhile

//forelse 4.2 feature
@forelse($users as $user)
@empty
@endforelse

// 输出内容，被转义过的
{{ $var }}
// 输出未转义内容，5.0 特性
{!! $var !!}
{{-- Blade 注释，不会被输出到页面中 --}}
// 三元表达式的简写，以下相当于「$name ? $name : 'Default'」
{{{ $name or 'Default' }}}
// 保留双大括号，以下会编译为 {{ name }}
@{{ name }}
              </pre>

              </section>



<section class="cmd-description grid-item">
              <h4><a name="html" href="#html">HTML</a></h4>
              <pre class="prettyprint lang-php">
HTML::macro('name', function(){});
// 将 HTML 字符串转为实体
HTML::entities($value);
// 将实体转为 HTML 字符
HTML::decode($value);
// 生成 JavaScript 文件链接
HTML::script($url, $attributes);
// 生成 CSS 文件链接
HTML::style($url, $attributes);
// 生成一个 HTML 图片元素
HTML::image($url, $alt, $attributes);
// 生成一个 HTML 链接
HTML::link($url, 'title', $attributes, $secure);
// 生成一个 HTTPS 类型的 HTML 链接
HTML::secureLink($url, 'title', $attributes);
// 给资源文件生成一个 HTML link
HTML::linkAsset($url, 'title', $attributes, $secure);
// 给资源文件生成一个 HTTPS HTML 链接
HTML::linkSecureAsset($url, 'title', $attributes);
// 给命名路由生成一个 HTML 链接
HTML::linkRoute($name, 'title', $parameters, $attributes);
// 给控制器动作生成 HTML 链接
HTML::linkAction($action, 'title', $parameters, $attributes);
// 给邮件地址生成 HTML 链接
HTML::mailto($email, 'title', $attributes);
// 混淆一个邮件地址以阻止垃圾邮件扫描器的嗅探
HTML::email($email);
// 生成有序列表
HTML::ol($list, $attributes);
// 生成无序列表
HTML::ul($list, $attributes);
HTML::listing($type, $list, $attributes);
HTML::listingElement($key, $type, $value);
HTML::nestedListing($key, $type, $value);
// 从数组中构建 HTML 属性
HTML::attributes($attributes);
// 构建单属性元素
HTML::attributeElement($key, $value);
// 混淆一个字符串以阻止垃圾邮件扫描器的嗅探
HTML::obfuscate($value);
              </pre>

              </section>

<section class="cmd-description grid-item">
              <h4><a name="str" href="#str">String</a> <a href="javascript:" title="Strings CLI @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
// 将 UTF-8 的值直译为 ASCII 类型的值
Str::ascii($value)
Str::camel($value)
Str::contains($haystack, $needle)
Str::endsWith($haystack, $needles)
Str::finish($value, $cap)
Str::is($pattern, $value)
Str::length($value)
Str::limit($value, $limit = 100, $end = '...')
Str::lower($value)
Str::words($value, $words = 100, $end = '...')
Str::plural($value, $count = 2)
// 生成更加真实的 "随机" 字母数字字符串.
Str::random($length = 16)
// 生成一个 "随机" 字母数字字符串.
Str::quickRandom($length = 16)
Str::upper($value)
Str::title($value)
Str::singular($value)
Str::slug($title, $separator = '-')
Str::snake($value, $delimiter = '_')
Str::startsWith($haystack, $needles)
Str::studly($value)
Str::macro($name, $macro)
              </pre>


              </section>

<section class="cmd-description grid-item">
              <h4><a name="helpers" href="#helpers">Helper</a> <a href="http://laravel.com/docs/helpers" title="Helpers @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <h6>数组</h6>
              <pre class="prettyprint lang-php">
// 如果给定的键不存在于该数组，array_add 函数将给定的键值对加到数组中
array_add($array, 'key', 'value');
// 将数组的每一个数组折成单一数组
array_collapse($array);
// 函数返回两个数组，一个包含原本数组的键，另一个包含原本数组的值
array_divide($array);
// 把多维数组扁平化成一维数组，并用「点」式语法表示深度
array_dot($array);
// 从数组移除给定的键值对
array_except($array, array('key'));
// 返回数组中第一个通过为真测试的元素
array_first($array, function($key, $value){}, $default);
// 将多维数组扁平化成一维
// ['Joe', 'PHP', 'Ruby'];
array_flatten(['name' => 'Joe', 'languages' => ['PHP', 'Ruby']]);
// 以「点」式语法从深度嵌套数组移除给定的键值对
array_forget($array, 'foo');
array_forget($array, 'foo.bar');
// 使用「点」式语法从深度嵌套数组取回给定的值
array_get($array, 'foo', 'default');
array_get($array, 'foo.bar', 'default');
// 使用「点」式语法检查给定的项目是否存在于数组中
array_has($array, 'products.desk');
// 从数组返回给定的键值对
array_only($array, array('key'));
// 从数组拉出一列给定的键值对
array_pluck($array, 'key');
// 从数组移除并返回给定的键值对
array_pull($array, 'key');
// 使用「点」式语法在深度嵌套数组中写入值
array_set($array, 'key', 'value');
array_set($array, 'key.subkey', 'value');
// 借由给定闭包结果排序数组
array_sort($array, function(){});
// 使用 sort 函数递归排序数组
array_sort_recursive();
// 使用给定的闭包过滤数组
array_where();
// 返回给定数组的第一个元素
head($array);
// 返回给定数组的最后一个元素
last($array);
              </pre>
              <h6>路径</h6>
              <pre class="prettyprint lang-php">
// 取得 app 文件夹的完整路径
app_path();
// 取得项目根目录的完整路径
base_path();
// 取得应用配置目录的完整路径
config_path();
// 取得应用数据库目录的完整路径
database_path();
// 取得加上版本号的 Elixir 文件路径
elixir();
// 取得 public 目录的完整路径
public_path();
// 取得 storage 目录的完整路径
storage_path();
              </pre>
              <h6>字符串</h6>
              <pre class="prettyprint lang-php">
// 将给定的字符串转换成 驼峰式命名
camel_case($value);
// 返回不包含命名空间的类名称
class_basename($class);
class_basename($object);
// 对给定字符串运行 htmlentities
e('&lt;html&gt;');
// 判断字符串开头是否为给定内容
starts_with('Foo bar.', 'Foo');
// 判断给定字符串结尾是否为指定内容
ends_with('Foo bar.', 'bar.');
// 将给定的字符串转换成 蛇形命名
snake_case('fooBar');
// 限制字符串的字符数量
str_limit();
// 判断给定字符串是否包含指定内容
str_contains('Hello foo bar.', 'foo');
// 添加给定内容到字符串结尾，foo/bar/
str_finish('foo/bar', '/');
// 判断给定的字符串与给定的格式是否符合
str_is('foo*', 'foobar');
// 转换字符串成复数形
str_plural('car');
// 产生给定长度的随机字符串
str_random(25);
// 转换字符串成单数形。该函数目前仅支持英文
str_singular('cars');
// 从给定字符串产生网址友善的「slug」
str_slug("Laravel 5 Framework", "-");
// 将给定字符串转换成「首字大写命名」: FooBar
studly_case('foo_bar');
// 根据你的本地化文件翻译给定的语句
trans('foo.bar');
// 根据后缀变化翻译给定的语句
trans_choice('foo.bar', $count);
              </pre>
              <h6>URLs and Links</h6>
              <pre class="prettyprint lang-php">
// 产生给定控制器行为网址
action('FooController@method', $parameters);
// 根据目前请求的协定（HTTP 或 HTTPS）产生资源文件网址
asset('img/photo.jpg', $title, $attributes);
// 根据 HTTPS 产生资源文件网址
secure_asset('img/photo.jpg', $title, $attributes);
// 产生给定路由名称网址
route($route, $parameters, $absolute = true);
// 产生给定路径的完整网址
url('path', $parameters = array(), $secure = null);
              </pre>
              <h6>Miscellaneous</h6>
              <pre class="prettyprint lang-php">
// 返回一个认证器实例。你可以使用它取代 Auth facade
auth()->user();
// 产生一个重定向回应让用户回到之前的位置
back();
// 使用 Bcrypt 哈希给定的数值。你可以使用它替代 Hash facade
bcrypt('my-secret-password');
// 从给定的项目产生集合实例
collect(['taylor', 'abigail']);
// 取得设置选项的设置值
config('app.timezone', $default);
// 产生包含 CSRF 令牌内容的 HTML 表单隐藏字段
{!! csrf_field() !!}
// 取得当前 CSRF 令牌的内容
$token = csrf_token();
// 输出给定变量并结束脚本运行
dd($value);
// 取得环境变量值或返回默认值
$env = env('APP_ENV');
$env = env('APP_ENV', 'production');
// 配送给定事件到所属的侦听器
event(new UserRegistered($user));
// 根据给定类、名称以及总数产生模型工厂建构器
$user = factory(App\User::class)->make();
// 产生拟造 HTTP 表单动作内容的 HTML 表单隐藏字段
{!! method_field('delete') !!}
// 取得快闪到 session 的旧有输入数值
$value = old('value');
$value = old('value', 'default');
// 返回重定向器实例以进行 重定向
return redirect('/home');
// 取得目前的请求实例或输入的项目
$value = request('key', $default = null)
// 创建一个回应实例或获取一个回应工厂实例
return response('Hello World', 200, $headers);
// 可被用于取得或设置单一 session 内容
$value = session('key');
// 在没有传递参数时，将返回 session 实例
$value = session()->get('key');
session()->put('key', $value);
// 返回给定数值
value(function(){ return 'bar'; });
// 取得视图 实例
return view('auth.login');
// 返回给定的数值
$value = with(new Foo)->work();
              </pre>
            </section>
            <section class="cmd-description grid-item">
              <h4><a name="collection" href="#collection">Collection</a> <a href="javascript:" title="Collections CLI @ Laravel Docs"><i class="icon-file-text"></i></a></h4>
              <pre class="prettyprint lang-php">
// 创建集合
collect([1, 2, 3]);
// 返回该集合所代表的底层数组：
$collection->all();
// 返回集合中所有项目的平均值：
$collection->avg();
// 将集合拆成多个给定大小的较小集合：
$collection->chunk(4);
// 将多个数组组成的集合折成单一数组集合：
$collection->collapse();
// 用来判断该集合是否含有指定的项目：
$collection->contains('New York');
// 返回该集合内的项目总数：
$collection->count();
// 遍历集合中的项目，并将之传入给定的回调函数：
$collection = $collection->each(function ($item, $key) {
});
// 会创建一个包含第 n 个元素的新集合：
$collection->every(4);
// 传递偏移值作为第二个参数：
$collection->every(4, 1);
// 返回集合中排除指定键的所有项目：
$collection->except(['price', 'discount']);
// 以给定的回调函数筛选集合，只留下那些通过判断测试的项目：
$filtered = $collection->filter(function ($item) {
    return $item > 2;
});
// 返回集合中，第一个通过给定测试的元素：
collect([1, 2, 3, 4])->first(function ($key, $value) {
    return $value > 2;
});
// 将多维集合转为一维集合：
$flattened = $collection->flatten();
// 将集合中的键和对应的数值进行互换：
$flipped = $collection->flip();
// 以键自集合移除掉一个项目：
$collection->forget('name');
// 返回含有可以用来在给定页码显示项目的新集合：
$chunk = $collection->forPage(2, 3);
// 返回给定键的项目。如果该键不存在，则返回 null：
$value = $collection->get('name');
// 根据给定的键替集合内的项目分组：
$grouped = $collection->groupBy('account_id');
// 用来确认集合中是否含有给定的键：
$collection->has('email');
// 用来连接集合中的项目
$collection->implode('product', ', ');
// 移除任何给定数组或集合内所没有的数值：
$intersect = $collection->intersect(['Desk', 'Chair', 'Bookcase']);
// 假如集合是空的，isEmpty 方法会返回 true：
collect([])->isEmpty();
// 以给定键的值作为集合项目的键：
$keyed = $collection->keyBy('product_id');
// 传入回调函数，该函数会返回集合的键的值：
$keyed = $collection->keyBy(function ($item) {
    return strtoupper($item['product_id']);
});
// 返回该集合所有的键：
$keys = $collection->keys();
// 返回集合中，最后一个通过给定测试的元素：
$collection->last();
// 遍历整个集合并将每一个数值传入给定的回调函数：
$multiplied = $collection->map(function ($item, $key) {
    return $item * 2;
});
// 返回给定键的最大值：
$max = collect([['foo' => 10], ['foo' => 20]])->max('foo');
$max = collect([1, 2, 3, 4, 5])->max();
// 将给定的数组合并进集合：
$merged = $collection->merge(['price' => 100, 'discount' => false]);
// 返回给定键的最小值：
$min = collect([['foo' => 10], ['foo' => 20]])->min('foo');
$min = collect([1, 2, 3, 4, 5])->min();
// 返回集合中指定键的所有项目：
$filtered = $collection->only(['product_id', 'name']);
// 获取所有集合中给定键的值：
$plucked = $collection->pluck('name');
// 移除并返回集合最后一个项目：
$collection->pop();
// 在集合前面增加一个项目：
$collection->prepend(0);
// 传递第二个参数来设置前置项目的键：
$collection->prepend(0, 'zero');
// 以键从集合中移除并返回一个项目：
$collection->pull('name');
// 附加一个项目到集合后面：
$collection->push(5);
// put 在集合内设置一个给定键和数值：
$collection->put('price', 100);
// 从集合中随机返回一个项目：
$collection->random();
// 传入一个整数到 random。如果该整数大于 1，则会返回一个集合：
$random = $collection->random(3);
// 会将每次迭代的结果传入到下一次迭代：
$total = $collection->reduce(function ($carry, $item) {
    return $carry + $item;
});
// 以给定的回调函数筛选集合：
$filtered = $collection->reject(function ($item) {
    return $item > 2;
});
// 反转集合内项目的顺序：
$reversed = $collection->reverse();
// 在集合内搜索给定的数值并返回找到的键：
$collection->search(4);
// 移除并返回集合的第一个项目：
$collection->shift();
// 随机排序集合的项目：
$shuffled = $collection->shuffle();
// 返回集合从给定索引开始的一部分切片：
$slice = $collection->slice(4);
// 对集合排序：
$sorted = $collection->sort();
// 以给定的键排序集合：
$sorted = $collection->sortBy('price');
// 移除并返回从指定的索引开始的一小切片项目：
$chunk = $collection->splice(2);
// 返回集合内所有项目的总和：
collect([1, 2, 3, 4, 5])->sum();
// 返回有着指定数量项目的集合：
$chunk = $collection->take(3);
// 将集合转换成纯 PHP 数组：
$collection->toArray();
// 将集合转换成 JSON：
$collection->toJson();
// 遍历集合并对集合内每一个项目调用给定的回调函数：
$collection->transform(function ($item, $key) {
    return $item * 2;
});
// 返回集合中所有唯一的项目：
$unique = $collection->unique();
// 返回键重设为连续整数的的新集合：
$values = $collection->values();
// 以一对给定的键／数值筛选集合：
$filtered = $collection->where('price', 100);
// 将集合与给定数组同样索引的值合并在一起：
$zipped = $collection->zip([100, 200]);
                </pre>
              </section>
<section class="cmd-description grid-item">
<h4><a name="middleware" href="#middleware">middleware</a> <a href="javascript:" title="中间件使用"><i class="icon-file-text"></i></a></h4>
<pre class="prettyprint lang-php">
//创建自定义中间件,app/Http/Middleware/BanDeleteMethod.php
php artisan make:middleware BanDeleteMethod
class BanDeleteMethod{
//handle()方法代表输入请求和输出请求的过程
    public function handle($request,Closure $next){
        if($request->ip()==='192.168.1.1'){
            return response('BANNED IP ADDRESS!',403);
        }
//禁止delete的方法
    if($request->method()==='DELETE'){
            return response('GET out of here with that delete method !',403);
        }
//$next()方法只接收$request,会继续下一个中间件的handle()的方法，直到没有更多中间件，最后该请求就可以达到应用程序了
//返回的是这个请求经过栈中的每一个中间件
//到达应用后，应用返回栈中的响应
            $response= $next($request);
//在响应返回用户前，可以再次与它进行交互
            $response->cookie('visited-our-site',true);
//最后将该响应返回给终端用户
            return $response;
    }
}

//绑定中间件,app/Http/Kernel.php中
//绑定全局的中间件
protected $middleware=[
    ...
    \App\Http\Middleware\BanDeleteMethod::class
];
//绑定路由中间件
protected $routeMiddleware=[
    ...
    'nodelete'=>\App\Http\Middleware\BanDeleteMethod::class
];
//使用中间件
Route::get('contacts',['middleware'=>'nodelete','users'=>'ContactsController@index']);
Route::group(['prefix'=>'api','middleware'=>'nodelete',function(){
    //素有路由一个API关联
}]);
//中间件传入参数
Route::get('company',function(){
    return view('company.admin');
})->middleware('auth:owner');
public function handle($request,$next,$role){
    if(auth()->check() && auth()->user()->hasRole($role)){
        return $next($request);
    }
    return redirect('login');
}
//有可能有多个参数的情况
Route::get('company',function(){
    return view('company.admin');
})->middleware('auth:owner,view');

//中间件路由的排除
 $this->middleware('auth', ['except' => ['show']]);
</pre>
                        </section>


            </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <script src="assets/js/jquery.js"></script>
      <script src="assets/js/jquery.highlight-4.js"></script>
      <script src="assets/js/google-code-prettify/prettify.js"></script>
      <script src="assets/js/foundation.min.js"></script>
      <script src="assets/js/masonry.js"></script>
      <script src="assets/js/app.js"></script>

      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'gaTrackingID', 'auto');
        ga('send', 'pageview');

      </script>
  </body>
</html>
